<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>CADViz â€“ Baseline</title>
    <script type="importmap">
      {
        "imports": {
          "three": "./node_modules/three/build/three.module.js",
          "three/addons/": "./node_modules/three/examples/jsm/"
        }
      }
    </script>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <div id="modelPrompt" class="modal-overlay">
      <div class="modal-panel">
        <h1>Load a model</h1>
        <p>Select a <strong>.glb</strong> or <strong>.gltf</strong> file to start exploring the rig.</p>
        <div class="modal-file">
          <input type="file" id="modelFile" accept=".glb,.gltf" />
        </div>
        <button id="modelLoadButton" class="modal-button" disabled>Load Model</button>
      </div>
    </div>
    <aside id="componentSidebar" class="component-sidebar collapsed disabled">
      <button
        id="componentSidebarToggle"
        class="component-sidebar__toggle"
        type="button"
        aria-label="Toggle component list"
        aria-expanded="false"
      >
        <span></span>
      </button>
      <div class="component-sidebar__content">
        <div class="sidebar-tabs" role="tablist">
          <button class="sidebar-tab active" data-tab="components" type="button">Components</button>
          <button class="sidebar-tab" data-tab="environment" type="button">Environment</button>
          <button class="sidebar-tab" data-tab="motion" type="button">Motion</button>
        </div>
        <div class="sidebar-panels">
          <section class="sidebar-panel active" data-panel="components">
            <div class="overview-header">
              <h2>Components</h2>
              <p id="modelComponentSummary">Load a model to inspect components</p>
            </div>
            <div id="modelComponentList" class="overview-list">
              <div class="overview-empty">Load a model to list all named meshes here.</div>
            </div>
            <p class="overview-hint">
              Click any component name to draw a highlight around every part with that label.
              Collapse this sidebar any time using the toggle tab on the right edge.
            </p>
          </section>
          <section class="sidebar-panel" data-panel="environment">
            <div class="overview-header">
              <h2>Environment settings</h2>
              <p>Adjust lighting and camera presets for the current scene.</p>
            </div>
            <div class="sidebar-group">
              <label for="cameraPresetSelect">Preset</label>
              <select id="cameraPresetSelect" class="sidebar-select"></select>
            </div>
            <div class="sidebar-group">
              <label for="cameraDurationInput">Tween duration</label>
              <div class="sidebar-inline">
                <input
                  type="range"
                  min="100"
                  max="3000"
                  step="50"
                  id="cameraDurationInput"
                  class="sidebar-range"
                  value="500"
                />
                <span id="cameraDurationValue" class="sidebar-meter">500 ms</span>
              </div>
            </div>
            <div class="sidebar-group">
              <label>Quick views</label>
              <div class="chip-row" id="cameraQuickButtons"></div>
            </div>
            <label class="switch">
              <input type="checkbox" id="evenLightingToggle" />
              Even lighting
            </label>
            <p class="overview-hint">
              Even lighting uses ambient illumination so the rig stays evenly lit from all angles.
            </p>
          </section>
          <section class="sidebar-panel" data-panel="motion">
            <div class="overview-header">
              <h2>Motion controls</h2>
              <p>Play the loaded CSV, adjust speed, or scrub the animation.</p>
            </div>
            <div class="sidebar-group chip-row">
              <button id="motionPlayButton" class="chip-button" type="button">Play</button>
              <button id="motionPauseButton" class="chip-button" type="button">Pause</button>
              <button id="motionStopButton" class="chip-button" type="button">Stop</button>
            </div>
            <div class="sidebar-group">
              <label for="motionProgress">Timeline</label>
              <div class="sidebar-inline">
                <input
                  type="range"
                  id="motionProgress"
                  class="sidebar-range"
                  min="0"
                  max="1"
                  step="0.0001"
                  value="0"
                />
                <span id="motionProgressValue" class="sidebar-meter">0%</span>
              </div>
            </div>
            <div class="sidebar-group">
              <label for="motionSpeed">Speed</label>
              <div class="sidebar-inline">
                <input
                  type="range"
                  id="motionSpeed"
                  class="sidebar-range"
                  min="0.1"
                  max="5"
                  step="0.1"
                  value="1"
                />
                <span id="motionSpeedValue" class="sidebar-meter">1.0x</span>
              </div>
            </div>
            <label class="switch">
              <input type="checkbox" id="motionLoopToggle" checked />
              Loop playback
            </label>
            <p class="overview-hint" id="motionStatusText">No motion file loaded.</p>
          </section>
        </div>
      </div>
    </aside>
    <div id="motionPrompt" class="modal-overlay hidden">
      <div class="modal-panel">
        <h1>Load motion data</h1>
        <p>Drop in a CSV exported from CADViz motion capture to animate the loaded rig.</p>
        <div class="modal-file">
          <input type="file" id="motionFile" accept=".csv" />
        </div>
        <button id="motionLoadButton" class="modal-button" disabled>Load Motion</button>
        <button id="motionCancelButton" class="modal-button secondary" type="button">Skip for now</button>
      </div>
    </div>
    <button id="openMotionLoader" class="floating-loader" type="button" disabled>
      <span class="loader-icon" aria-hidden="true">
        <span class="icon-arrow"></span>
        <span class="icon-stem"></span>
        <span class="icon-trail trail-1"></span>
        <span class="icon-trail trail-2"></span>
      </span>
      Load Motion
    </button>
    <script type="module" src="./app.js"></script>
  </body>
</html>

